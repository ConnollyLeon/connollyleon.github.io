---
layout: default
---

<div class="page-header">
  <div class="container">
    <h1 class="page-title">{{ page.title }}</h1>
    {% if page.subtitle %}
    <p class="page-subtitle">{{ page.subtitle }}</p>
    {% endif %}
  </div>
</div>

<div class="main-content">
  <article class="post-content">
    <header class="post-header">
      <div class="post-meta">
        {% if page.categories %}
        <span class="article-category">{{ page.categories | first }}</span>
        {% endif %}
        <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%Y年%m月%d日" }}</time>
        {% if page.author %}
        <span class="post-author">作者: {{ page.author }}</span>
        {% endif %}
        {% if page.source %}
        <a href="{{ page.source }}" target="_blank" rel="noopener" class="post-source">原文链接 ↗</a>
        {% endif %}
        {% if page.tags %}
        <div class="article-tags">
          {% for tag in page.tags %}
          <span class="tag">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </header>

    <div class="post-body">
      {{ content }}
    </div>

    <footer class="post-footer">
      <div class="share-section">
        <span class="share-label">分享文章:</span>
        <button class="share-btn wechat" onclick="showWechatShare()">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
            <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178A1.17 1.17 0 0 1 4.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813 0c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178 1.17 1.17 0 0 1-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826 0 1.622-.12 2.361-.336a.722.722 0 0 1 .598.082l1.584.926a.272.272 0 0 0 .14.047c.134 0 .24-.111.24-.247 0-.06-.024-.12-.038-.177l-.325-1.233a.582.582 0 0 1-.023-.156.49.49 0 0 1 .201-.398C23.024 18.48 24 16.82 24 14.98c0-3.21-2.931-5.837-6.656-6.088V8.89l-.006-.033zm-2.634 2.588c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.97-.982zm4.844 0c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.969-.982z"/>
          </svg>
          微信
        </button>
        <button class="share-btn copy-link" onclick="copyLink()">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
          </svg>
          复制链接
        </button>
        <span class="copy-toast" id="copyToast">链接已复制</span>
      </div>
    </footer>
  </article>

  <aside class="sidebar">
    <div class="widget">
      <h3 class="widget-title">相关文章</h3>
      <ul class="related-posts">
        {% assign related_posts = site.posts | where_exp: "post", "post.url != page.url" %}
        {% for post in related_posts limit:5 %}
        {% if page.categories contains post.categories.first or page.tags contains post.tags.first %}
        <li>
          <a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
          <span class="post-date">{{ post.date | date: "%Y年%m月%d日" }}</span>
        </li>
        {% endif %}
        {% endfor %}
      </ul>
    </div>

    <div class="widget">
      <h3 class="widget-title">分类</h3>
      <ul class="category-list">
        {% for category in site.categories %}
        <li>
          <a href="/category/{{ category[0] }}/">
            {{ category[0] }}
            <span class="count">{{ category[1].size }}</span>
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </aside>
</div>

<style>
.post-body {
  line-height: 1.8;
  font-size: 17px;

  @media (max-width: 640px) {
    font-size: 16px;
    line-height: 1.7;
  }
}

.post-body h2 {
  margin-top: 32px;
  margin-bottom: 16px;
  font-size: 24px;

  @media (max-width: 640px) {
    margin-top: 24px;
    margin-bottom: 12px;
    font-size: 20px;
  }
}

.post-body h3 {
  margin-top: 24px;
  margin-bottom: 12px;
  font-size: 20px;

  @media (max-width: 640px) {
    margin-top: 20px;
    margin-bottom: 10px;
    font-size: 18px;
  }
}

.post-body p {
  margin-bottom: 16px;

  @media (max-width: 640px) {
    margin-bottom: 14px;
  }
}

.post-body ul, .post-body ol {
  margin-left: 20px;
  margin-bottom: 16px;

  @media (max-width: 640px) {
    margin-left: 16px;
    margin-bottom: 14px;
  }
}

.post-body li {
  margin-bottom: 6px;
}

.post-body blockquote {
  border-left: 4px solid #0066cc;
  padding-left: 16px;
  margin: 20px 0;
  background: #f0f7ff;
  padding: 12px 16px;
  border-radius: 0 8px 8px 0;

  @media (max-width: 640px) {
    margin: 16px 0;
    padding: 10px 12px;
  }
}

.post-footer {
  margin-top: 32px;
  padding-top: 20px;
  border-top: 1px solid #e2e8f0;

  @media (max-width: 640px) {
    margin-top: 24px;
    padding-top: 16px;
  }
}

.share-section {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.share-label {
  font-size: 14px;
  color: #4a5568;
  font-weight: 500;

  @media (max-width: 640px) {
    font-size: 13px;
    width: 100%;
    margin-bottom: 4px;
  }
}

.share-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 6px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s;

  @media (max-width: 640px) {
    padding: 8px 12px;
    font-size: 13px;
  }
}

.share-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.share-btn.wechat {
  background: #07c160;
}

.share-btn.copy-link {
  background: #4a5568;
}

.copy-toast {
  font-size: 13px;
  color: #07c160;
  opacity: 0;
  transition: opacity 0.3s;
  margin-left: 8px;

  @media (max-width: 640px) {
    margin-left: 0;
    margin-top: 8px;
    width: 100%;
  }
}

.copy-toast.show {
  opacity: 1;
}

.wechat-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
  padding: 16px;

  @media (max-width: 640px) {
    padding: 16px;
  }
}

.wechat-modal.active {
  opacity: 1;
  visibility: visible;
}

.wechat-modal-content {
  background: white;
  padding: 24px;
  border-radius: 12px;
  text-align: center;
  max-width: 280px;
  width: 100%;

  @media (max-width: 640px) {
    padding: 20px;
    max-width: 260px;
  }
}

.wechat-modal h4 {
  margin: 0 0 12px;
  font-size: 16px;
  color: #1a202c;

  @media (max-width: 640px) {
    font-size: 15px;
  }
}

.wechat-qr {
  width: 160px;
  height: 160px;
  background: #f8fafc;
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  border: 1px solid #e2e8f0;

  @media (max-width: 640px) {
    width: 140px;
    height: 140px;
  }
}

.wechat-qr svg {
  width: 100px;
  height: 100px;

  @media (max-width: 640px) {
    width: 80px;
    height: 80px;
  }
}

.wechat-modal p {
  font-size: 12px;
  color: #718096;
  margin: 0;
}

.wechat-modal-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  font-size: 28px;
  color: white;
  cursor: pointer;
  padding: 8px;

  @media (max-width: 640px) {
    top: 8px;
    right: 8px;
    font-size: 24px;
  }
}

.related-posts {
  list-style: none;
  margin: 0;
}

.related-posts li {
  padding: 10px 0;
  border-bottom: 1px solid #e2e8f0;

  @media (max-width: 640px) {
    padding: 8px 0;
  }
}

.related-posts li:last-child {
  border-bottom: none;
}

.related-posts a {
  display: block;
  color: #4a5568;
  font-weight: 500;
  font-size: 14px;
  margin-bottom: 4px;

  @media (max-width: 640px) {
    font-size: 14px;
  }
}

.related-posts a:hover {
  color: #0066cc;
}

.related-posts .post-date {
  font-size: 12px;
  color: #718096;
}

.post-source {
  color: #0066cc;
  font-size: 13px;
  text-decoration: none;
  transition: color 0.2s;

  &:hover {
    color: #004c99;
    text-decoration: underline;
  }

  @media (max-width: 640px) {
    font-size: 12px;
  }
}

@media (max-width: 640px) {
  .post-meta {
    flex-wrap: wrap;
    gap: 8px;
    font-size: 12px;
  }

  .article-tags {
    gap: 6px;
  }

  .tag {
    font-size: 11px;
    padding: 3px 8px;
  }
}
</style>

<div class="wechat-modal" id="wechatModal" onclick="hideWechatShare(event)">
  <button class="wechat-modal-close" onclick="hideWechatShare(event)">&times;</button>
  <div class="wechat-modal-content" onclick="event.stopPropagation()">
    <h4>微信分享</h4>
    <div class="wechat-qr">
      <svg viewBox="0 0 200 200" fill="#4a5568">
        <rect x="20" y="20" width="160" height="160" rx="8"/>
        <rect x="50" y="50" width="100" height="100" fill="white"/>
        <rect x="65" y="65" width="70" height="70" rx="4"/>
        <rect x="80" y="80" width="40" height="40" rx="2"/>
        <rect x="30" y="30" width="30" height="30" rx="4" fill="#07c160"/>
        <rect x="35" y="35" width="10" height="10" fill="white"/>
        <rect x="55" y="35" width="10" height="10" fill="white"/>
        <rect x="35" y="55" width="10" height="10" fill="white"/>
        <rect x="45" y="45" width="10" height="10" fill="white"/>
        <rect x="55" y="55" width="20" height="20" fill="white"/>
        <rect x="135" y="30" width="20" height="20" rx="4" fill="#07c160"/>
        <rect x="30" y="135" width="20" height="20" rx="4" fill="#07c160"/>
      </svg>
    </div>
    <p>扫码关注公众号分享文章</p>
  </div>
</div>

<script>
function showWechatShare() {
  document.getElementById('wechatModal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function hideWechatShare(e) {
  if (e.target === e.currentTarget || e.type === 'click') {
    document.getElementById('wechatModal').classList.remove('active');
    document.body.style.overflow = '';
  }
}

function copyLink() {
  const url = window.location.href;
  navigator.clipboard.writeText(url).then(function() {
    const toast = document.getElementById('copyToast');
    toast.classList.add('show');
    setTimeout(function() {
      toast.classList.remove('show');
    }, 2000);
  }).catch(function(err) {
    console.error('Failed to copy:', err);
  });
}

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    hideWechatShare({target: document.getElementById('wechatModal'), currentTarget: document.getElementById('wechatModal')});
  }
});
</script>
